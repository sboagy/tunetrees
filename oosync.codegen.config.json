{
  "outputs": {
    "sqliteSchemaFile": "drizzle/schema-sqlite.generated.ts",
    "tableMetaFile": "shared/generated/sync/table-meta.generated.ts",
    "appTableMetaFile": "shared/table-meta.ts",
    "workerPgSchemaFile": "worker/src/generated/schema-postgres.generated.ts",
    "workerConfigFile": "worker/src/generated/worker-config.generated.ts"
  },
  "tableMeta": {
    "excludeTables": ["sync_change_log"],
    "changeCategoryByTable": {
      "genre": "catalog",
      "tune_type": "catalog",
      "genre_tune_type": "catalog",
      "user_profile": "user",
      "instrument": "catalog",
      "prefs_scheduling_options": "user",
      "prefs_spaced_repetition": "user",
      "playlist": "repertoire",
      "table_state": null,
      "tab_group_main_state": null,
      "tune": "catalog",
      "playlist_tune": "repertoire",
      "practice_record": "practice",
      "daily_practice_queue": "practice",
      "table_transient_data": "practice",
      "note": "repertoire",
      "reference": "repertoire",
      "tag": "repertoire",
      "tune_override": "repertoire",
      "plugin": "user"
    },
    "tableToSchemaKeyOverrides": {
      "plugin": "plugin"
    },
    "normalizeDatetimeByTable": {
      "practice_record": ["practiced", "backup_practiced", "due"],
      "daily_practice_queue": [
        "window_start_utc",
        "window_end_utc",
        "generated_at",
        "completed_at",
        "snapshot_coalesced_ts"
      ]
    }
  },
  "worker": {
    "config": {
      "pull": {
        "tableRules": {
          "plugin": {
            "kind": "orEqUserIdOrTrue",
            "column": "user_ref",
            "orColumn": "is_public"
          }
        }
      },
      "push": {
        "tableRules": {
          "practice_record": {
            "denyDelete": true,
            "upsert": {
              "omitSetProps": ["id"],
              "retryMinimalPayloadKeepProps": [
                "id",
                "playlistRef",
                "tuneRef",
                "practiced",
                "quality",
                "due",
                "backupPracticed",
                "goal",
                "technique",
                "syncVersion",
                "lastModifiedAt",
                "deviceId"
              ]
            },
            "sanitize": {
              "ensureSyncProps": true,
              "nullIfEmptyStringProps": [
                "practiced",
                "due",
                "backupPracticed",
                "deviceId"
              ]
            }
          }
        }
      }
    }
  }
}
