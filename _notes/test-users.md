# TuneTrees Test Users

## Purpose

Dedicated test users for Playwright E2E testing. These users have known credentials and predictable data states.

## Test Users

### 1. Test User - Alice (Primary Test User)

- **Email:** `alice.test@tunetrees.test`
- **Password:** `SomePasswordForTesting`
- **UUID:** Generated by Supabase auth
- **Use Case:** Primary user for testing practice workflows
- **Data:**
  - 1 playlist: "Alice's Test Repertoire"
  - 5 tunes in repertoire
  - 3 tunes scheduled for today's practice
  - Mix of recall levels (new, learning, review)

### 2. Test User - Bob (Secondary Test User)

- **Email:** `bob.test@tunetrees.test`
- **Password:** `SomePasswordForTesting`
- **UUID:** Generated by Supabase auth
- **Use Case:** Testing multi-user scenarios, data isolation
- **Data:**
  - 1 playlist: "Bob's Test Collection"
  - 10 tunes in catalog (not in repertoire)
  - Empty practice queue

### 3. Test User - Charlie (Edge Cases)

- **Email:** `charlie.test@tunetrees.test`
- **Password:** `SomePasswordForTesting`
- **UUID:** Generated by Supabase auth
- **Use Case:** Edge cases, empty states
- **Data:**
  - No playlists
  - No tunes
  - Completely empty account

## Test Data Structure

### Alice's Test Repertoire

1. **Banish Misfortune** (Jig, D Major) - Due today, recall_level=3
2. **Morrison's Jig** (Jig, E Dorian) - Due today, recall_level=1 (new)
3. **The Kesh** (Jig, G Major) - Due today, recall_level=2 (learning)
4. **Si Bheag Si Mhor** (Air, G Major) - Future practice (not due)
5. **The Silver Spear** (Reel, D Major) - Lapsed (overdue)

### Bob's Catalog (not in repertoire)

1-10: Various jigs, reels, hornpipes with different modes

## Authentication Setup

Test users created via Supabase Admin API during seed:

```sql
-- Users created in auth.users table
-- Passwords hashed with bcrypt
-- Email confirmation bypassed for test accounts
```

## Usage in Tests

```typescript
// playwright.config.ts
export default defineConfig({
  use: {
    baseURL: "http://localhost:5173",
  },
  projects: [
    {
      name: "alice-tests",
      use: {
        storageState: "tests/.auth/alice.json",
      },
    },
    {
      name: "bob-tests",
      use: {
        storageState: "tests/.auth/bob.json",
      },
    },
  ],
});
```

```typescript
// tests/auth.setup.ts
test("authenticate as alice", async ({ page }) => {
  await page.goto("/login");
  await page.getByLabel("Email").fill("alice.test@tunetrees.test");
  await page.getByLabel("Password").fill("SomePasswordForTesting");
  await page.getByRole("button", { name: "Sign In" }).click();
  await page.waitForURL("/practice");
  await page.context().storageState({ path: "tests/.auth/alice.json" });
});
```

## Database Reset

Before each test run:

```bash
supabase db reset  # Resets to seed.sql state
```

In CI:

```yaml
- name: Reset Database
  run: supabase db reset
```

## Notes

- Test user emails use `.test` TLD to clearly distinguish from real users
- Passwords are strong but standardized for easy test authoring
- UUIDs are stable across resets (deterministic seeding)
- Test data designed to cover common and edge cases
